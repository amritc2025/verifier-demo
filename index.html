<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>mDL Verifier</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; background: #f9f9f9; }
    .result { background: #fff; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .success { color: green; font-weight: bold; font-size: 1.2rem; }
  </style>
</head>
<body>
  <h2>mDL Verifier</h2>
  <div id="result" class="result">üîÑ Loading...</div>

  <script>
    async function runVerifier() {
      const urlParams = new URLSearchParams(window.location.search);
      const vcUrl = urlParams.get("vc");

      if (!vcUrl) {
        document.getElementById("result").innerHTML = "‚ùå No VC provided.";
        return;
      }

      try {
        const res = await fetch(vcUrl);
        const vc = await res.json();

        // Optional: You could call a Veramo verification endpoint here

        const credentialSubject = vc.credentialSubject || {};

        const givenName = credentialSubject.givenName || "N/A";
        const familyName = credentialSubject.familyName || "N/A";
        const birthDate = credentialSubject.birthDate || "N/A";
        const drivingClass = credentialSubject.drivingClass || "N/A";
        const expiryDate = credentialSubject.expiryDate || "N/A";

        const fullName = `${givenName} ${familyName}`;

        document.getElementById("result").innerHTML = `
          <div class="success">‚úÖ Verified!</div>
          <p><strong>Name:</strong> ${fullName}</p>
          <p><strong>Date of Birth:</strong> ${birthDate}</p>
          <p><strong>Driving Class:</strong> ${drivingClass}</p>
          <p><strong>Expiry Date:</strong> ${expiryDate}</p>
        `;
      } catch (err) {
        console.error(err);
        document.getElementById("result").innerHTML = "‚ùå Failed to load or verify VC.";
      }
    }

    runVerifier();
  </script>
</body>
</html>


